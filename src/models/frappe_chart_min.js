export default(function(){"use strict";function i(a,b){return"string"==typeof a?(b||document).querySelector(a):a||null}function m(b){var a=b.getBoundingClientRect();return{top:a.top+(document.documentElement.scrollTop||document.body.scrollTop),left:a.left+(document.documentElement.scrollLeft||document.body.scrollLeft)}}function n(a){return a.titleHeight+a.margins.top+a.paddings.top}function o(a){return a.margins.left+a.paddings.left}function p(a){return a.margins.top+a.margins.bottom+a.paddings.top+a.paddings.bottom+a.titleHeight+a.legendHeight}function q(a){return a.margins.left+a.margins.right+a.paddings.left+a.paddings.right}function r(a){return parseFloat(a.toFixed(2))}function s(a,e,b){var c=arguments.length>3&& void 0!==arguments[3]&&arguments[3];b||(b=c?a[0]:a[a.length-1]);var d=new Array(Math.abs(e)).fill(b);return a=c?d.concat(a):a.concat(d)}function t(a,b){return(a+"").length*b}function u(a,b){return{x:Math.sin(a*av)*b,y:Math.cos(a*av)*b}}function v(a){var b=arguments.length>1&& void 0!==arguments[1]&&arguments[1];return!Number.isNaN(a)&& void 0!==a&&!!Number.isFinite(a)&&!(b&&a<0)}function w(a){var b=void 0,d=void 0,c=void 0;if(a instanceof Date)return new Date(a.getTime());if("object"!==(void 0===a?"undefined":aj(a))||null===a)return a;for(c in b=Array.isArray(a)?[]:{},a)d=a[c],b[c]=w(d);return b}function x(a,b){var c=void 0,d=void 0;return a<=b?(c=b-a,d=a):(c=a-b,d=b),[c,d]}function y(a,b){var c=arguments.length>2&& void 0!==arguments[2]?arguments[2]:b.length-a.length;return c>0?a=s(a,c):b=s(b,c),[a,b]}function z(a,b){if(a)return a.length>b?a.slice(0,b-3)+"...":a}function A(b,d){for(var c=[],a=0;a<b.length;a++)c.push([b[a],d[a]]);var e=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return{length:Math.sqrt(Math.pow(c,2)+Math.pow(d,2)),angle:Math.atan2(d,c)}},f=function(a,f,g,h){var b=e(f||a,g||a),c=b.angle+(h?Math.PI:0),d=.2*b.length;return[a[0]+Math.cos(c)*d,a[1]+Math.sin(c)*d]};return function(a,b){return a.reduce(function(d,a,c,e){return 0===c?a[0]+","+a[1]:d+" "+b(a,c,e)},"")}(c,function(a,b,c){var d=f(c[b-1],c[b-2],a),e=f(a,c[b-1],c[b+1],!0);return"C "+d[0]+","+d[1]+" "+e[0]+","+e[1]+" "+a[0]+","+a[1]})}function B(a){return a>255?255:a<0?0:a}function C(e,b){var a=ay(e),d=!1;"#"==a[0]&&(a=a.slice(1),d=!0);var c=parseInt(a,16),f=B((c>>16)+b),g=B((c>>8&255)+b),h=B((255&c)+b);return(d?"#":"")+(h|g<<8|f<<16).toString(16)}function D(a,b){return"string"==typeof a?(b||document).querySelector(a):a||null}function E(f,e){var c=document.createElementNS("http://www.w3.org/2000/svg",f);for(var a in e){var b=e[a];if("inside"===a)D(b).appendChild(c);else if("around"===a){var d=D(b);d.parentNode.insertBefore(c,d),c.appendChild(d)}else"styles"===a?"object"===(void 0===b?"undefined":aj(b))&&Object.keys(b).map(function(a){c.style[a]=b[a]}):("className"===a&&(a="class"),"innerHTML"===a?c.textContent=b:c.setAttribute(a,b))}return c}function F(a,b,c,d){return E("stop",{inside:a,style:"stop-color: "+c,offset:b,"stop-opacity":d})}function G(c){var d=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&& void 0!==arguments[2]?arguments[2]:void 0,b={className:c,transform:d};return a&&(b.inside=a),E("g",b)}function H(a){return E("path",{className:arguments.length>1&& void 0!==arguments[1]?arguments[1]:"",d:a,styles:{stroke:arguments.length>2&& void 0!==arguments[2]?arguments[2]:"none",fill:arguments.length>3&& void 0!==arguments[3]?arguments[3]:"none","stroke-width":arguments.length>4&& void 0!==arguments[4]?arguments[4]:2}})}function I(f,a){var g,h,d=arguments.length>2&& void 0!==arguments[2]&&arguments[2],e="path-fill-gradient-"+a+"-"+(d?"lighter":"default"),c=E("linearGradient",{inside:g=f,id:e,x1:0,x2:0,y1:0,y2:1}),b=[1,.6,.2];return d&&(b=[.4,.2,0]),F(c,"0%",a,b[0]),F(c,"50%",a,b[1]),F(c,"100%",a,b[2]),e}function J(b,c,d,a,e){var f=arguments.length>5&& void 0!==arguments[5]?arguments[5]:"none",g=arguments.length>6&& void 0!==arguments[6]?arguments[6]:{},h={className:b,x:c,y:d,width:a,height:a,rx:e,fill:f};return Object.keys(g).map(function(a){h[a]=g[a]}),E("rect",h)}function K(c,d,e,f){var a=arguments.length>4&& void 0!==arguments[4]?arguments[4]:{},b=a.fontSize||aE;return E("text",{className:c,x:d,y:e,dy:(void 0!==a.dy?a.dy:b/2)+"px","font-size":b+"px",fill:a.fill||aG,"text-anchor":a.textAnchor||"start",innerHTML:f})}function L(g,e,b,c){var a=arguments.length>4&& void 0!==arguments[4]?arguments[4]:{};a.stroke||(a.stroke=aF),a.lineType||(a.lineType=""),a.alignment||(a.alignment="left"),a.shortenNumbers&&(e=function(b){var a=void 0;if("number"==typeof b)a=b;else if("string"==typeof b&&(a=Number(b),Number.isNaN(a)))return b;var c=Math.floor(Math.log10(Math.abs(a)));if(c<=2)return a;var d=Math.floor(c/3),e=Math.pow(10,c-3*d)*+(a/Math.pow(10,c)).toFixed(1);return Math.round(100*e)/100+" "+["","K","M","B","T"][d]}(e));var h="line-horizontal "+a.className+("dashed"===a.lineType?"dashed":""),i="left"===a.alignment?a.title?b-aA+aB:b-aA:a.title?c+4*aA-aB:c+4*aA,j=E("line",{className:h,x1:a.title?b+aB:b,x2:a.title?c-aB:c,y1:0,y2:0,styles:{stroke:a.stroke}}),f=E("text",{x:i,y:0,dy:aE/2-2+"px","font-size":aE+"px","text-anchor":b<c?"end":"start",innerHTML:e+""}),d=E("g",{transform:"translate(0, "+g+")","stroke-opacity":1});return 0!==f&&"0"!==f||(d.style.stroke="rgba(27, 31, 35, 0.6)"),d.appendChild(j),d.appendChild(f),d}function M(a){if(a.title){var c="left"===a.position?(a.height-aD)/2+t(a.title,5)/2:(a.height-aD)/2-t(a.title,5)/2,d="left"===a.position?0:a.width,e="left"===a.position?aE-aB:aE+ -1*aB,f="right"===a.position?"rotate(90)":"rotate(270)",g=E("text",{className:"chart-label",x:0,y:0,dy:e+"px","font-size":aE+"px","text-anchor":"start",innerHTML:a.title+" "}),b=E("g",{x:0,y:0,transformBox:"fill-box",transform:"translate("+d+", "+c+") "+f,className:"test-"+a.position});return b.appendChild(g),b}}function N(b,g,c){var a=arguments.length>3&& void 0!==arguments[3]?arguments[3]:{};v(b)||(b=0),a.pos||(a.pos="left"),a.offset||(a.offset=0),a.mode||(a.mode="span"),a.stroke||(a.stroke=aF),a.className||(a.className="");var d=-1*az,e="span"===a.mode?c+az:0;"tick"===a.mode&&"right"===a.pos&&(d=c+az,e=c);var f="left"===a.pos?-1*a.offset:a.offset;return d+=f,e+=f,L(b,g,d,e,{stroke:a.stroke,className:a.className,lineType:a.lineType,alignment:a.pos,title:a.title,shortenNumbers:a.shortenNumbers})}function O(b,a,c,d){var e="string"==typeof a?a:a.join(", ");return[b,{transform:c.join(", ")},d,aK,"translate",{transform:e}]}function P(a,b,c){return O(a,[0,c],[0,b],aJ)}function Q(a,b){return[a,{d:b},j,aK]}function R(c,h,l){var m=arguments.length>3&& void 0!==arguments[3]?arguments[3]:"linear",d=arguments.length>4&& void 0!==arguments[4]?arguments[4]:void 0,n=arguments.length>5&& void 0!==arguments[5]?arguments[5]:{},i=c.cloneNode(!0),e=c.cloneNode(!0);for(var a in h){var f=void 0;f="transform"===a?document.createElementNS("http://www.w3.org/2000/svg","animateTransform"):document.createElementNS("http://www.w3.org/2000/svg","animate");var j=n[a]||c.getAttribute(a),b=h[a],g={attributeName:a,from:j,to:b,begin:"0s",dur:l/1e3+"s",values:j+";"+b,keySplines:aL[m],keyTimes:"0;1",calcMode:"spline",fill:"freeze"};for(var k in d&&(g.type=d),g)f.setAttribute(k,g[k]);i.appendChild(f),d?e.setAttribute(a,"translate("+b+")"):e.setAttribute(a,b)}return[i,e]}function S(a,b){a.style.transform=b,a.style.webkitTransform=b,a.style.msTransform=b,a.style.mozTransform=b,a.style.oTransform=b}function T(b){var a=new Date(b);return a.setMinutes(a.getMinutes()-a.getTimezoneOffset()),a}function U(a){var b=a.getDate(),c=a.getMonth()+1;return[a.getFullYear(),(c>9?"":"0")+c,(b>9?"":"0")+b].join("-")}function V(a){return new Date(a.getTime())}function W(a,b){var c=_(a);return Math.ceil(X(c,b)/aM)}function X(a,b){return(T(b)-T(a))/(aO*aN)}function Y(a,b){return a.getMonth()===b.getMonth()&&a.getFullYear()===b.getFullYear()}function Z(b){var c=arguments.length>1&& void 0!==arguments[1]&&arguments[1],a=aP[b];return c?a.slice(0,3):a}function $(a,b){return new Date(b,a+1,0)}function _(c){var a=V(c),b=a.getDay();return 0!==b&&aa(a,-1*b),a}function aa(a,b){a.setDate(a.getDate()+b)}function ab(e,b,c){var d=Object.keys(aS).filter(function(a){return e.includes(a)}),a=aS[d[0]];return Object.assign(a,{constants:b,getData:c}),new aR(a)}function ac(a){if(0===a)return[0,0];if(isNaN(a))return{mantissa:-6755399441055744,exponent:972};var b=a>0?1:-1;if(!isFinite(a))return{mantissa:4503599627370496*b,exponent:972};a=Math.abs(a);var c=Math.floor(Math.log10(a));return[b*(a/Math.pow(10,c)),c]}function ad(d){var a=arguments.length>1&& void 0!==arguments[1]?arguments[1]:0,e=ac(d),b=ap(e,2),c=b[0],f=b[1];return(function(h){var i=arguments.length>1&& void 0!==arguments[1]?arguments[1]:0,f=Math.ceil(h),d=Math.floor(i),a=f-d,b=a,c=1;a>5&&(a%2!=0&&(a=++f-d),b=a/2,c=2),a<=2&&(c=a/(b=4)),0===a&&(b=5,c=1);for(var g=[],e=0;e<=b;e++)g.push(d+c*e);return g})(c=c.toFixed(6),a?a/Math.pow(10,f):0).map(function(a){return f<0?a/Math.pow(10,-f):a*Math.pow(10,f)})}function ae(f){function g(c,d){for(var a=ad(c),e=a[1]-a[0],b=0,f=1;b<d;f++)b+=e,a.unshift(-1*b);return a}var h=arguments.length>1&& void 0!==arguments[1]&&arguments[1],a=Math.max.apply(Math,aq(f)),b=Math.min.apply(Math,aq(f)),c=[];if(a>=0&&b>=0)ac(a)[1],c=h?ad(a,b):ad(a);else if(a>0&&b<0){var d=Math.abs(b);a>=d?(ac(a)[1],c=g(a,d)):(ac(d)[1],c=g(d,a).reverse().map(function(a){return -1*a}))}else if(a<=0&&b<=0){var e=Math.abs(b),i=Math.abs(a);ac(e)[1],c=(c=h?ad(e,i):ad(e)).reverse().map(function(a){return -1*a})}return c}function af(a){var b=ag(a);return a.indexOf(0)>=0?a.indexOf(0):a[0]>0?-1*a[0]/b:-1*a[a.length-1]/b+(a.length-1)}function ag(a){return a[1]-a[0]}function ah(a){return a[a.length-1]-a[0]}function ai(b,a){return r(a.zeroLine-b*a.scaleMultiplier)}!function(c,d){void 0===d&&(d={});var e=d.insertAt;if(c&&"undefined"!=typeof document){var b=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===e&&b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a),a.styleSheet?a.styleSheet.cssText=c:a.appendChild(document.createTextNode(c))}}('.chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ol,.graph-svg-tip ul{padding-left:0;display:-webkit-box;display:-ms-flexbox;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;-webkit-box-flex:1;-ms-flex:1;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:" ";border:5px solid transparent;border-top-color:rgba(0,0,0,.8)}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}');var aj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ak=(function(){function b(a){this.value=a}function a(a){var c,d;function e(g,h){try{var c=a[g](h),d=c.value;d instanceof b?Promise.resolve(d.value).then(function(a){e("next",a)},function(a){e("throw",a)}):f(c.done?"return":"normal",c.value)}catch(i){f("throw",i)}}function f(b,a){switch(b){case"return":c.resolve({value:a,done:!0});break;case"throw":c.reject(a);break;default:c.resolve({value:a,done:!1})}(c=c.next)?e(c.key,c.arg):d=null}this._invoke=function(a,b){return new Promise(function(g,h){var f={key:a,arg:b,resolve:g,reject:h,next:null};d?d=d.next=f:(c=d=f,e(a,b))})},"function"!=typeof a.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(a.prototype[Symbol.asyncIterator]=function(){return this}),a.prototype.next=function(a){return this._invoke("next",a)},a.prototype.throw=function(a){return this._invoke("throw",a)},a.prototype.return=function(a){return this._invoke("return",a)}}(),function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}),al=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),am=function g(a,c,d){null===a&&(a=Function.prototype);var b=Object.getOwnPropertyDescriptor(a,c);if(void 0===b){var e=Object.getPrototypeOf(a);return null===e?void 0:g(e,c,d)}if("value"in b)return b.value;var f=b.get;if(void 0!==f)return f.call(d)},an=function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)},ao=function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b},ap=function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return function(h,d){var a=[],b=!0,e=!1,f=void 0;try{for(var g,c=h[Symbol.iterator]();!(b=(g=c.next()).done)&&(a.push(g.value),!d||a.length!==d);b=!0);}catch(i){e=!0,f=i}finally{try{!b&&c.return&&c.return()}finally{if(e)throw f}}return a}(a,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")},aq=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)};i.create=function(f,e){var a=document.createElement(f);for(var b in e){var c=e[b];if("inside"===b)i(c).appendChild(a);else if("around"===b){var d=i(c);d.parentNode.insertBefore(a,d),a.appendChild(d)}else"styles"===b?"object"===(void 0===c?"undefined":aj(c))&&Object.keys(c).map(function(b){a.style[b]=c[b]}):b in a?a[b]=c:a.setAttribute(b,c)}return a};var ar={margins:{top:10,bottom:10,left:20,right:20},paddings:{top:20,bottom:40,left:30,right:10},baseHeight:240,titleHeight:20,legendHeight:30,titleFontSize:12},as=["line","bar"],at=7,a=["light-blue","blue","violet","red","orange","yellow","green","light-green","purple","magenta","light-grey","dark-grey",],au={bar:a,line:a,pie:a,percentage:a,heatmap:["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],donut:a},av=Math.PI/180,aw=function(){function a(b){var c=b.parent,d=b.colors;ak(this,a),this.parent=void 0===c?null:c,this.colors=void 0===d?[]:d,this.titleName="",this.titleValue="",this.listValues=[],this.titleValueFirst=0,this.x=0,this.y=0,this.top=0,this.left=0,this.setup()}return al(a,[{key:"setup",value:function(){this.makeTooltip()}},{key:"refresh",value:function(){this.fill(),this.calcPosition()}},{key:"makeTooltip",value:function(){var a=this;this.container=i.create("div",{inside:this.parent,className:"graph-svg-tip comparison",innerHTML:'<span class="title"></span>\n				<ul class="data-point-list"></ul>\n				<div class="svg-pointer"></div>'}),this.hideTip(),this.title=this.container.querySelector(".title"),this.dataPointList=this.container.querySelector(".data-point-list"),this.parent.addEventListener("mouseleave",function(){a.hideTip()})}},{key:"fill",value:function(){var b=this,a=void 0;this.index&&this.container.setAttribute("data-point-index",this.index),a=this.titleValueFirst?"<strong>"+this.titleValue+"</strong>"+this.titleName:this.titleName+"<strong>"+this.titleValue+"</strong>",this.title.innerHTML=a,this.dataPointList.innerHTML="",this.listValues.map(function(a,d){var e=b.colors[d]||"black",c=0===a.formatted||a.formatted?a.formatted:a.value,f=i.create("li",{styles:{"border-top":"3px solid "+e},innerHTML:'<strong style="display: block;">'+(0===c||c?c:"")+"</strong>\n					"+(a.title?a.title:"")});b.dataPointList.appendChild(f)})}},{key:"calcPosition",value:function(){var c=this.container.offsetWidth;this.top=this.y-this.container.offsetHeight-5,this.left=this.x-c/2;var a=this.parent.offsetWidth-c,b=this.container.querySelector(".svg-pointer");if(this.left<0)b.style.left="calc(50% - "+ -1*this.left+"px)",this.left=0;else if(this.left>a){var d="calc(50% + "+(this.left-a)+"px)";b.style.left=d,this.left=a}else b.style.left="50%"}},{key:"setValues",value:function(b,c){var a=arguments.length>2&& void 0!==arguments[2]?arguments[2]:{},d=arguments.length>3&& void 0!==arguments[3]?arguments[3]:[],e=arguments.length>4&& void 0!==arguments[4]?arguments[4]:-1;this.titleName=a.name,this.titleValue=a.value,this.listValues=d,this.x=b,this.y=c,this.titleValueFirst=a.valueFirst||0,this.index=e,this.refresh()}},{key:"hideTip",value:function(){this.container.style.top="0px",this.container.style.left="0px",this.container.style.opacity="0"}},{key:"showTip",value:function(){this.container.style.top=this.top+"px",this.container.style.left=this.left+"px",this.container.style.opacity="1"}},]),a}(),ax={"light-blue":"#7cd6fd",blue:"#5e64ff",violet:"#743ee2",red:"#ff5858",orange:"#ffa00a",yellow:"#feef72",green:"#28a745","light-green":"#98d85b",purple:"#b554ff",magenta:"#ffa3ef",black:"#36114C",grey:"#bdd3e6","light-grey":"#f0f4f7","dark-grey":"#b8c2cc"},ay=function(a){return/rgb[a]{0,1}\([\d, ]+\)/gim.test(a)?/\D+(\d*)\D+(\d*)\D+(\d*)/gim.exec(a).map(function(a,b){return 0!==b?Number(a).toString(16):"#"}).reduce(function(a,b){return""+a+b}):ax[a]||a},az=6,aA=4,aB=25,aC=15,aD=120,aE=10,aF="#dadada",aG="#555b51",aH={bar:function(a){var c=void 0;"rect"!==a.nodeName&&(c=a.getAttribute("transform"),a=a.childNodes[0]);var b=a.cloneNode();return b.style.fill="#000000",b.style.opacity="0.4",c&&b.setAttribute("transform",c),b},dot:function(a){var c=void 0;"circle"!==a.nodeName&&(c=a.getAttribute("transform"),a=a.childNodes[0]);var b=a.cloneNode(),d=a.getAttribute("r"),e=a.getAttribute("fill");return b.setAttribute("r",parseInt(d)+4),b.setAttribute("fill",e),b.style.opacity="0.6",c&&b.setAttribute("transform",c),b},heat_square:function(a){var c=void 0;"circle"!==a.nodeName&&(c=a.getAttribute("transform"),a=a.childNodes[0]);var b=a.cloneNode(),d=a.getAttribute("r"),e=a.getAttribute("fill");return b.setAttribute("r",parseInt(d)+4),b.setAttribute("fill",e),b.style.opacity="0.6",c&&b.setAttribute("transform",c),b}},aI={bar:function(a,c){var b=void 0;"rect"!==a.nodeName&&(b=a.getAttribute("transform"),a=a.childNodes[0]);var d=["x","y","width","height"];Object.values(a.attributes).filter(function(a){return d.includes(a.name)&&a.specified}).map(function(a){c.setAttribute(a.name,a.nodeValue)}),b&&c.setAttribute("transform",b)},dot:function(a,c){var b=void 0;"circle"!==a.nodeName&&(b=a.getAttribute("transform"),a=a.childNodes[0]);var d=["cx","cy"];Object.values(a.attributes).filter(function(a){return d.includes(a.name)&&a.specified}).map(function(a){c.setAttribute(a.name,a.nodeValue)}),b&&c.setAttribute("transform",b)},heat_square:function(a,c){var b=void 0;"circle"!==a.nodeName&&(b=a.getAttribute("transform"),a=a.childNodes[0]);var d=["cx","cy"];Object.values(a.attributes).filter(function(a){return d.includes(a.name)&&a.specified}).map(function(a){c.setAttribute(a.name,a.nodeValue)}),b&&c.setAttribute("transform",b)}},j=350,aJ=j,aK="easein",aL={ease:"0.25 0.1 0.25 1",linear:"0 0 1 1",easein:"0.1 0.8 0.2 1",easeout:"0 0 0.58 1",easeinout:"0.42 0 0.58 1"},c=function(){function a(c,b){if(ak(this,a),b=w(b),this.parent="string"==typeof c?document.querySelector(c):c,!(this.parent instanceof HTMLElement))throw new Error("No `parent` element to render on was provided.");this.rawChartArgs=b,this.title=b.title||"",this.type=b.type||"",this.realData=this.prepareData(b.data),this.data=this.prepareFirstData(this.realData),this.colors=this.validateColors(b.colors,this.type),this.config={showTooltip:1,showLegend:1,isNavigable:b.isNavigable||0,animate:void 0!==b.animate?b.animate:1,truncateLegends:b.truncateLegends||1},this.measures=JSON.parse(JSON.stringify(ar));var d=this.measures;this.setMeasures(b),this.title.length||(d.titleHeight=0),this.config.showLegend||(d.legendHeight=0),this.argHeight=b.height||d.baseHeight,this.state={},this.options={},this.initTimeout=700,this.config.isNavigable&&(this.overlays=[]),this.configure(b)}return al(a,[{key:"prepareData",value:function(a){return a}},{key:"prepareFirstData",value:function(a){return a}},{key:"validateColors",value:function(a,b){var c=[];return(a=(a||[]).concat(au[b])).forEach(function(b){var a,d=ay(b);(a=d,/(^\s*)(#)((?:[A-Fa-f0-9]{3}){1,2})$/i.test(a)||/(^\s*)(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/i.test(a))?c.push(d):console.warn('"'+b+'" is not a valid color.')}),c}},{key:"setMeasures",value:function(){}},{key:"configure",value:function(){var b=this,a=this.argHeight;this.baseHeight=a,this.height=a-p(this.measures),this.boundDrawFn=function(){return b.draw(!0)},ResizeObserver&&(this.resizeObserver=new ResizeObserver(this.boundDrawFn),this.resizeObserver.observe(this.parent)),window.addEventListener("resize",this.boundDrawFn),window.addEventListener("orientationchange",this.boundDrawFn)}},{key:"destroy",value:function(){this.resizeObserver&&this.resizeObserver.disconnect(),window.removeEventListener("resize",this.boundDrawFn),window.removeEventListener("orientationchange",this.boundDrawFn)}},{key:"setup",value:function(){this.makeContainer(),this.updateWidth(),this.makeTooltip(),this.draw(!1,!0)}},{key:"makeContainer",value:function(){this.parent.innerHTML="";var a={inside:this.parent,className:"chart-container"};this.independentWidth&&(a.styles={width:this.independentWidth+"px"}),this.container=i.create("div",a)}},{key:"makeTooltip",value:function(){this.tip=new aw({parent:this.container,colors:this.colors}),this.bindTooltip()}},{key:"bindTooltip",value:function(){}},{key:"draw",value:function(){var c,d=this,a=arguments.length>0&& void 0!==arguments[0]&&arguments[0],b=arguments.length>1&& void 0!==arguments[1]&&arguments[1];a&&null===this.parent.offsetParent||(this.updateWidth(),this.calc(a),this.makeChartArea(),this.setupComponents(),this.components.forEach(function(a){return a.setup(d.drawArea)}),this.render(this.components,!1),b&&(this.data=this.realData,setTimeout(function(){d.update(d.data)},this.initTimeout)),this.renderLegend(),this.setupNavigation(b))}},{key:"calc",value:function(){}},{key:"updateWidth",value:function(){var a,b,c;this.baseWidth=(a=this.parent,c=parseFloat((b=window.getComputedStyle(a)).paddingLeft)+parseFloat(b.paddingRight),a.clientWidth-c),this.width=this.baseWidth-q(this.measures)}},{key:"makeChartArea",value:function(){this.svg&&this.container.removeChild(this.svg);var c,d,e,f,g,a=this.measures;this.svg=(c=this.container,d="frappe-chart chart",E("svg",{className:d,inside:c,width:e=this.baseWidth,height:this.baseHeight})),this.svgDefs=E("defs",{inside:this.svg}),this.title.length&&(this.titleEL=K("title",a.margins.left,a.margins.top,this.title,{fontSize:a.titleFontSize,fill:"#666666",dy:a.titleFontSize}));var b=n(a);this.drawArea=G(this.type+"-chart chart-draw-area","translate("+o(a)+", "+b+")"),this.config.showLegend&&(b+=this.height+a.paddings.bottom,this.legendArea=G("chart-legend","translate("+o(a)+", "+b+")")),this.title.length&&this.svg.appendChild(this.titleEL),this.svg.appendChild(this.drawArea),this.config.showLegend&&this.svg.appendChild(this.legendArea),this.updateTipOffset(o(a),n(a))}},{key:"updateTipOffset",value:function(a,b){this.tip.offset={x:a,y:b}}},{key:"setupComponents",value:function(){this.components=new Map}},{key:"update",value:function(a){a||console.error("No data to update."),this.data=this.prepareData(a),this.calc(),this.render(this.components,this.config.animate),this.renderLegend()}},{key:"render",value:function(){var c=this,a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:this.components,d=!(arguments.length>1&& void 0!==arguments[1])||arguments[1];this.config.isNavigable&&this.overlays.map(function(a){return a.parentNode.removeChild(a)});var b=[];a.forEach(function(a){b=b.concat(a.update(d))}),b.length>0?(function(a,b,c){if(0!==c.length){var d=function(a,b){var e=[],c=[];b.map(function(a){var b=a[0],d=b.parentNode,f=void 0,g=void 0;a[0]=b;var i=R.apply(void 0,aq(a)),h=ap(i,2);f=h[0],g=h[1],e.push(g),c.push([f,d]),d&&d.replaceChild(f,b)});var d=a.cloneNode(!0);return c.map(function(a,c){a[1]&&(a[1].replaceChild(e[c],a[0]),b[c][0]=e[c])}),d}(b,c);b.parentNode==a&&(a.removeChild(b),a.appendChild(d)),setTimeout(function(){d.parentNode==a&&(a.removeChild(d),a.appendChild(b))},250)}}(this.container,this.svg,b),setTimeout(function(){a.forEach(function(a){return a.make()}),c.updateNav()},400)):(a.forEach(function(a){return a.make()}),this.updateNav())}},{key:"updateNav",value:function(){this.config.isNavigable&&(this.makeOverlay(),this.bindUnits())}},{key:"renderLegend",value:function(){}},{key:"setupNavigation",value:function(){var b=this,a=arguments.length>0&& void 0!==arguments[0]&&arguments[0];this.config.isNavigable&&a&&(this.bindOverlay(),this.keyActions={13:this.onEnterKey.bind(this),37:this.onLeftArrow.bind(this),38:this.onUpArrow.bind(this),39:this.onRightArrow.bind(this),40:this.onDownArrow.bind(this)},document.addEventListener("keydown",function(a){var d,c;(c=(0,b.container).getBoundingClientRect()).top>=0&&c.left>=0&&c.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&c.right<=(window.innerWidth||document.documentElement.clientWidth)&&(a=a||window.event,b.keyActions[a.keyCode]&&b.keyActions[a.keyCode]())}))}},{key:"makeOverlay",value:function(){}},{key:"updateOverlay",value:function(){}},{key:"bindOverlay",value:function(){}},{key:"bindUnits",value:function(){}},{key:"onLeftArrow",value:function(){}},{key:"onRightArrow",value:function(){}},{key:"onUpArrow",value:function(){}},{key:"onDownArrow",value:function(){}},{key:"onEnterKey",value:function(){}},{key:"addDataPoint",value:function(){}},{key:"removeDataPoint",value:function(){}},{key:"getDataPoint",value:function(){}},{key:"setCurrentDataPoint",value:function(){}},{key:"updateDataset",value:function(){}},{key:"export",value:function(){var k,a,c,d,e,f,b,g,h,j=((a=(0,this.svg).cloneNode(!0)).classList.add("chart-container"),a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),c=i.create("style",{innerHTML:".chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ul{padding-left:0;display:flex}.graph-svg-tip ol{padding-left:0;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:' ';border:5px solid transparent;border-top-color:rgba(0,0,0,.8)}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}"}),a.insertBefore(c,a.firstChild),(d=i.create("div")).appendChild(a),d.innerHTML);e=this.title||"Chart",f=[j],(b=document.createElement("a")).style="display: none",g=new Blob(f,{type:"image/svg+xml; charset=utf-8"}),h=window.URL.createObjectURL(g),b.href=h,b.download=e,document.body.appendChild(b),b.click(),setTimeout(function(){document.body.removeChild(b),window.URL.revokeObjectURL(h)},300)}},]),a}(),d=function(b){function a(b,c){return ak(this,a),ao(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,c))}return an(a,b),al(a,[{key:"configure",value:function(b){am(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"configure",this).call(this,b),this.config.formatTooltipY=(b.tooltipOptions||{}).formatTooltipY,this.config.maxSlices=b.maxSlices||20,this.config.maxLegendPoints=b.maxLegendPoints||20}},{key:"calc",value:function(){var f=this,b=this.state,c=this.config.maxSlices;b.sliceTotals=[];var a=this.data.labels.map(function(a,c){var b=0;return f.data.datasets.map(function(a){b+=a.values[c]}),[b,a]}).filter(function(a){return a[0]>=0}),d=a;if(a.length>c){a.sort(function(a,b){return b[0]-a[0]}),d=a.slice(0,c-1);var e=0;a.slice(c-1).map(function(a){e+=a[0]}),d.push([e,"Rest"]),this.colors[c-1]="grey"}b.labels=[],d.map(function(a){var c;b.sliceTotals.push(Number(Math.round(a[0]+"e4")+"e-4")),b.labels.push(a[1])}),b.grandTotal=b.sliceTotals.reduce(function(a,b){return a+b},0),this.center={x:this.width/2,y:this.height/2}}},{key:"renderLegend",value:function(){var b=this,a=this.state;this.legendArea.textContent="",this.legendTotals=a.sliceTotals.slice(0,this.config.maxLegendPoints);var c=0,d=0;this.legendTotals.map(function(g,f){var e=150,h=Math.floor((b.width-q(b.measures))/e);b.legendTotals.length<h&&(e=b.width/b.legendTotals.length),c>h&&(c=0,d+=20);var i=e*c+5,j=b.config.truncateLegends?z(a.labels[f],e/10):a.labels[f],k=b.config.formatTooltipY?b.config.formatTooltipY(g):g,l=function(c,d,g){var e=arguments.length>3&& void 0!==arguments[3]?arguments[3]:"none",a=arguments[4];a=arguments.length>5&& void 0!==arguments[5]&&arguments[5]?z(a,aC):a;var f=E("text",{className:"legend-dataset-text",x:0,y:0,dx:aE+"px",dy:aE/3+"px","font-size":1.2*aE+"px","text-anchor":"start",fill:aG,innerHTML:a}),b=E("g",{transform:"translate("+c+", "+d+")"});return b.appendChild(E("circle",{className:"legend-dot",cx:0,cy:0,r:5,fill:e})),b.appendChild(f),b}(i,d,5,b.colors[f],j+": "+k,!1);b.legendArea.appendChild(l),c++})}},]),a}(c),aM=7,aN=1e3,aO=86400,aP=["January","February","March","April","May","June","July","August","September","October","November","December",],aQ=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],aR=function(){function a(b){var c=b.layerClass,d=b.layerTransform,e=b.constants,f=b.getData,g=b.makeElements,h=b.animateElements;ak(this,a),this.layerTransform=void 0===d?"":d,this.constants=e,this.makeElements=g,this.getData=f,this.animateElements=h,this.store=[],this.labels=[],this.layerClass=void 0===c?"":c,this.layerClass="function"==typeof this.layerClass?this.layerClass():this.layerClass,this.refresh()}return al(a,[{key:"refresh",value:function(a){this.data=a||this.getData()}},{key:"setup",value:function(a){this.layer=G(this.layerClass,this.layerTransform,a)}},{key:"make",value:function(){this.render(this.data),this.oldData=this.data}},{key:"render",value:function(a){var b=this;this.store=this.makeElements(a),this.layer.textContent="",this.store.forEach(function(a){a.length?a.forEach(function(a){b.layer.appendChild(a)}):b.layer.appendChild(a)}),this.labels.forEach(function(a){b.layer.appendChild(a)})}},{key:"update",value:function(){var b=!(arguments.length>0&& void 0!==arguments[0])||arguments[0];this.refresh();var a=[];return b&&(a=this.animateElements(this.data)||[]),a}},]),a}(),aS={donutSlices:{layerClass:"donut-slices",makeElements:function(a){return a.sliceStrings.map(function(c,d){var b=H(c,"donut-path",a.colors[d],"none",a.strokeWidth);return b.style.transition="transform .3s;",b})},animateElements:function(a){return this.store.map(function(b,c){return Q(b,a.sliceStrings[c])})}},pieSlices:{layerClass:"pie-slices",makeElements:function(a){return a.sliceStrings.map(function(c,d){var b=H(c,"pie-path","none",a.colors[d]);return b.style.transition="transform .3s;",b})},animateElements:function(a){return this.store.map(function(b,c){return Q(b,a.sliceStrings[c])})}},percentageBars:{layerClass:"percentage-bars",makeElements:function(a){var b=this;return a.xPositions.map(function(d,c){return function(d,f,a,b){var e=arguments.length>4&& void 0!==arguments[4]?arguments[4]:2,c=arguments.length>5&& void 0!==arguments[5]?arguments[5]:"none";return E("rect",{className:"percentage-bar",x:d,y:0,width:a,height:b,fill:c,styles:{stroke:C(c,-25),"stroke-dasharray":"0, "+(b+a)+", "+a+", "+b,"stroke-width":e}})}(d,0,a.widths[c],b.constants.barHeight,b.constants.barDepth,a.colors[c])})},animateElements:function(a){if(a)return[]}},yAxis:{layerClass:"y axis",makeElements:function(a){var c=this,b=[];return a.length?(a.forEach(function(d,e){d.positions.map(function(a,e){b.push(N(a,d.labels[e],c.constants.width,{mode:c.constants.mode,pos:d.pos||c.constants.pos,shortenNumbers:c.constants.shortenNumbers,title:d.title}))}),d.title&&b.push(M({title:d.title,position:d.pos,height:c.constants.height||a.zeroLine,width:c.constants.width}))}),b):(a.positions.forEach(function(d,e){b.push(N(d,a.labels[e],c.constants.width,{mode:c.constants.mode,pos:a.pos||c.constants.pos,shortenNumbers:c.constants.shortenNumbers}))}),a.title&&b.push(M({title:a.title,position:a.pos,height:this.constants.height||a.zeroLine,width:this.constants.width})),b)},animateElements:function(c){var j=this,k=function(c,d){var e=d.positions,a=d.labels,b=c.positions,f=c.labels,i=y(b,e),g=ap(i,2);b=g[0],e=g[1];var k=y(f,a),h=ap(k,2);return f=h[0],a=h[1],j.render({positions:b,labels:a}),j.store.map(function(c,a){return P(c,e[a],b[a])})};if(this.oldData instanceof Array)return this.oldData.forEach(function(a,b){k(a,c[b])});var d=c.positions,a=c.labels,b=this.oldData.positions,e=this.oldData.labels,h=y(b,d),f=ap(h,2);b=f[0],d=f[1];var i=y(e,a),g=ap(i,2);return e=g[0],a=g[1],this.render({positions:b,labels:a}),this.store.map(function(c,a){return P(c,d[a],b[a])})}},xAxis:{layerClass:"x axis",makeElements:function(a){var b=this;return a.positions.map(function(c,d){return function(b,f,c){var a=arguments.length>3&& void 0!==arguments[3]?arguments[3]:{};v(b)||(b=0),a.pos||(a.pos="bottom"),a.offset||(a.offset=0),a.mode||(a.mode="span"),a.stroke||(a.stroke=aF),a.className||(a.className="");var d=c+az,e="span"===a.mode?-1*az:c;return"tick"===a.mode&&"top"===a.pos&&(d=-1*az,e=0),function(e,f,a,d){var b=arguments.length>4&& void 0!==arguments[4]?arguments[4]:{};b.stroke||(b.stroke=aF);var g=E("line",{className:"line-vertical "+b.className,x1:0,x2:0,y1:a,y2:d,styles:{stroke:b.stroke}}),h=E("text",{x:0,y:a>d?a+aA:a-aA-aE,dy:aE+"px","font-size":aE+"px","text-anchor":"middle",innerHTML:f+""}),c=E("g",{transform:"translate("+e+", 0)"});return c.appendChild(g),c.appendChild(h),c}(b,f,d,e,{stroke:a.stroke,className:a.className,lineType:a.lineType})}(c,a.calcLabels[d],b.constants.height,{mode:b.constants.mode,pos:b.constants.pos})})},animateElements:function(c){var d=c.positions,a=c.calcLabels,b=this.oldData.positions,e=this.oldData.calcLabels,h=y(b,d),f=ap(h,2);b=f[0],d=f[1];var i=y(e,a),g=ap(i,2);return e=g[0],a=g[1],this.render({positions:b,calcLabels:a}),this.store.map(function(g,a){var c,e,f;return c=g,e=d[a],f=b[a],O(c,[f,0],[e,0],aJ)})}},yMarkers:{layerClass:"y-markers",makeElements:function(a){var b=this;return a.map(function(a){return function(e,b,c){var a=arguments.length>3&& void 0!==arguments[3]?arguments[3]:{};a.labelPos||(a.labelPos="right");var f=E("text",{className:"chart-label",x:"left"===a.labelPos?aA:c-t(b,5)-aA,y:0,dy:-(aE/2)+"px","font-size":aE+"px","text-anchor":"start",innerHTML:b+""}),d=L(e,"",0,c,{stroke:a.stroke||aF,className:a.className||"",lineType:a.lineType});return d.appendChild(f),d}(a.position,a.label,b.constants.width,{labelPos:a.options.labelPos,mode:"span",lineType:"dashed"})})},animateElements:function(a){var c=y(this.oldData,a),b=ap(c,2);this.oldData=b[0];var e=(a=b[1]).map(function(a){return a.position}),f=a.map(function(a){return a.label}),g=a.map(function(a){return a.options}),d=this.oldData.map(function(a){return a.position});return this.render(d.map(function(b,a){return{position:d[a],label:f[a],options:g[a]}})),this.store.map(function(b,a){return P(b,e[a],d[a])})}},yRegions:{layerClass:"y-regions",makeElements:function(a){var b=this;return a.map(function(a){return function(g,d,a,e){var b=arguments.length>4&& void 0!==arguments[4]?arguments[4]:{},f=g-d,h=E("rect",{className:"bar mini",styles:{fill:"rgba(228, 234, 239, 0.49)",stroke:aF,"stroke-dasharray":a+", "+f},x:0,y:0,width:a,height:f});b.labelPos||(b.labelPos="right");var i=E("text",{className:"chart-label",x:"left"===b.labelPos?aA:a-t(e+"",4.5)-aA,y:0,dy:-(aE/2)+"px","font-size":aE+"px","text-anchor":"start",innerHTML:e+""}),c=E("g",{transform:"translate(0, "+d+")"});return c.appendChild(h),c.appendChild(i),c}(a.startPos,a.endPos,b.constants.width,a.label,{labelPos:a.options.labelPos})})},animateElements:function(a){var c=y(this.oldData,a),b=ap(c,2);this.oldData=b[0];var f=(a=b[1]).map(function(a){return a.endPos}),g=a.map(function(a){return a.label}),h=a.map(function(a){return a.startPos}),i=a.map(function(a){return a.options}),d=this.oldData.map(function(a){return a.endPos}),j=this.oldData.map(function(a){return a.startPos});this.render(d.map(function(b,a){return{startPos:j[a],endPos:d[a],label:g[a],options:i[a]}}));var e=[];return this.store.map(function(l,a){var b,j,c,k,g,i;e=e.concat((b=l,j=h[a],c=f[a],k=d[a],g=j-c,i=b.childNodes[0],[[i,{height:g,"stroke-dasharray":i.getAttribute("width")+", "+g},aJ,aK],O(b,[0,k],[0,c],aJ),]))}),e}},heatDomain:{layerClass:function(){return"heat-domain domain-"+this.constants.index},makeElements:function(b){var c=this,a=this.constants,d=a.index,e=a.colWidth,f=a.rowHeight,g=a.squareSize,h=a.radius,i=a.xTranslate,j=0;return this.serializedSubDomains=[],b.cols.map(function(a,b){1===b&&c.labels.push(K("domain-name",i,-12,Z(d,!0).toUpperCase(),{fontSize:9})),a.map(function(a,b){if(a.fill){var d={"data-date":a.yyyyMmDd,"data-value":a.dataValue,"data-day":b},e=J("day",i,j,g,h,a.fill,d);c.serializedSubDomains.push(e)}j+=f}),j=0,i+=e}),this.serializedSubDomains},animateElements:function(a){if(a)return[]}},barGraph:{layerClass:function(){return"dataset-units dataset-bars dataset-"+this.constants.index},makeElements:function(a){var b=this.constants;return this.unitType="bar",this.units=a.yPositions.map(function(d,c){return function(c,k,d,l){var f=arguments.length>4&& void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&& void 0!==arguments[5]?arguments[5]:0,m=arguments.length>6&& void 0!==arguments[6]?arguments[6]:0,g=arguments.length>7&& void 0!==arguments[7]?arguments[7]:{},n=x(k,g.zeroLine),j=ap(n,2),b=j[0],a=j[1];a-=m,0===b&&(b=g.minHeight,a-=g.minHeight),v(c)||(c=0),v(a)||(a=0),v(b,!0)||(b=0),v(d,!0)||(d=0);var e=E("rect",{className:"bar mini",style:"fill: "+l,"data-point-index":i,x:c,y:a,width:d,height:b});if((f+="")||f.length){e.setAttribute("y",0),e.setAttribute("x",0);var o=E("text",{className:"data-point-value",x:d/2,y:0,dy:-(aE/2*1)+"px","font-size":aE+"px","text-anchor":"middle",innerHTML:f}),h=E("g",{"data-point-index":i,transform:"translate("+c+", "+a+")"});return h.appendChild(e),h.appendChild(o),h}return e}(a.xPositions[c],d,a.barWidth,b.color,a.labels[c],c,a.offsets[c],{zeroLine:a.zeroLine,barsWidth:a.barsWidth,minHeight:b.minHeight})}),this.units},animateElements:function(a){var f=a.xPositions,g=a.yPositions,h=a.offsets,b=a.labels,c=this.oldData.xPositions,d=this.oldData.yPositions,e=this.oldData.offsets,i=this.oldData.labels,o=y(c,f),k=ap(o,2);c=k[0],f=k[1];var p=y(d,g),l=ap(p,2);d=l[0],g=l[1];var q=y(e,h),m=ap(q,2);e=m[0],h=m[1];var r=y(i,b),n=ap(r,2);i=n[0],b=n[1],this.render({xPositions:c,yPositions:d,offsets:e,labels:b,zeroLine:this.oldData.zeroLine,barsWidth:this.oldData.barsWidth,barWidth:this.oldData.barWidth});var s=[];return this.store.map(function(c,b){s=s.concat(function(a,c,g,d){var h=arguments.length>4&& void 0!==arguments[4]?arguments[4]:0,i=x(g,(arguments.length>5&& void 0!==arguments[5]?arguments[5]:{}).zeroLine),e=ap(i,2),f=e[0],b=e[1];return b-=h,"rect"!==a.nodeName?[[a.childNodes[0],{width:d,height:f},j,aK],O(a,a.getAttribute("transform").split("(")[1].slice(0,-1),[c,b],aJ),]:[[a,{width:d,height:f,x:c,y:b},j,aK]]}(c,f[b],g[b],a.barWidth,h[b],{zeroLine:a.zeroLine}))}),s}},lineGraph:{layerClass:function(){return"dataset-units dataset-line dataset-"+this.constants.index},makeElements:function(b){var a=this.constants;return this.unitType="dot",this.paths={},a.hideLine||(this.paths=function(b,f,c){var d=arguments.length>3&& void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&& void 0!==arguments[4]?arguments[4]:{},e=f.map(function(a,c){return b[c]+","+a}).join("L");d.spline&&(e=A(b,f));var g=H("M"+e,"line-graph-path",c);if(d.heatline){var i=I(a.svgDefs,c);g.style.stroke="url(#"+i+")"}var h={path:g};if(d.regionFill){var j=I(a.svgDefs,c,!0),k="M"+b[0]+","+a.zeroLine+"L"+e+"L"+b.slice(-1)[0]+","+a.zeroLine;h.region=H(k,"region-fill","none","url(#"+j+")")}return h}(b.xPositions,b.yPositions,a.color,{heatline:a.heatline,regionFill:a.regionFill,spline:a.spline},{svgDefs:a.svgDefs,zeroLine:b.zeroLine})),this.units=[],a.hideDots||(this.units=b.yPositions.map(function(d,c){return function(d,e,f,h){var b=arguments.length>4&& void 0!==arguments[4]?arguments[4]:"",g=arguments.length>5&& void 0!==arguments[5]?arguments[5]:0,a=E("circle",{style:"fill: "+h,"data-point-index":g,cx:d,cy:e,r:f});if((b+="")||b.length){a.setAttribute("cy",0),a.setAttribute("cx",0);var i=E("text",{className:"data-point-value",x:0,y:0,dy:-(aE/2*1)-f+"px","font-size":aE+"px","text-anchor":"middle",innerHTML:b}),c=E("g",{"data-point-index":g,transform:"translate("+d+", "+e+")"});return c.appendChild(a),c.appendChild(i),c}return a}(b.xPositions[c],d,b.radius,a.color,a.valuesOverPoints?b.values[c]:"",c)})),Object.values(this.paths).concat(this.units)},animateElements:function(a){var b=a.xPositions,c=a.yPositions,d=a.values,e=this.oldData.xPositions,f=this.oldData.yPositions,h=this.oldData.values,m=y(e,b),i=ap(m,2);e=i[0],b=i[1];var n=y(f,c),k=ap(n,2);f=k[0],c=k[1];var o=y(h,d),l=ap(o,2);h=l[0],d=l[1],this.render({xPositions:e,yPositions:f,values:d,zeroLine:this.oldData.zeroLine,radius:this.oldData.radius});var g=[];return Object.keys(this.paths).length&&(g=g.concat(function(a,b,e,f,g){var c=[],d=e.map(function(a,c){return b[c]+","+a}).join("L");g&&(d=A(b,e));var h=[a.path,{d:"M"+d},350,aK];if(c.push(h),a.region){var i=b[0]+","+f+"L",j="L"+b.slice(-1)[0]+", "+f,k=[a.region,{d:"M"+i+d+j},350,aK];c.push(k)}return c}(this.paths,b,c,a.zeroLine,this.constants.spline))),this.units.length&&this.units.map(function(h,f){var a,d,e;g=g.concat((a=h,d=b[f],e=c[f],"circle"!==a.nodeName?[O(a,a.getAttribute("transform").split("(")[1].slice(0,-1),[d,e],aJ)]:[[a,{cx:d,cy:e},j,aK]]))}),g}}},f=function(b){function a(c,d){ak(this,a);var b=ao(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c,d));return b.type="percentage",b.setup(),b}return an(a,b),al(a,[{key:"setMeasures",value:function(c){var b=this.measures;this.barOptions=c.barOptions||{};var a=this.barOptions;a.height=a.height||20,a.depth=a.depth||2,b.paddings.right=30,b.legendHeight=60,b.baseHeight=8*(a.height+.5*a.depth)}},{key:"setupComponents",value:function(){var b=this.state,a=[["percentageBars",{barHeight:this.barOptions.height,barDepth:this.barOptions.depth},(function(){return{xPositions:b.xPositions,widths:b.widths,colors:this.colors}}).bind(this),],];this.components=new Map(a.map(function(a){var b=ab.apply(void 0,aq(a));return[a[0],b]}))}},{key:"calc",value:function(){var c=this;am(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"calc",this).call(this);var b=this.state;b.xPositions=[],b.widths=[];var d=0;b.sliceTotals.map(function(e){var a=c.width*e/b.grandTotal;b.widths.push(a),b.xPositions.push(d),d+=a})}},{key:"makeDataByIndex",value:function(){}},{key:"bindTooltip",value:function(){var a=this,b=this.state;this.container.addEventListener("mousemove",function(h){var e=a.components.get("percentageBars").store,c=h.target;if(e.includes(c)){var d=e.indexOf(c),f=m(a.container),g=m(c),i=g.left-f.left+parseInt(c.getAttribute("width"))/2,j=g.top-f.top,k=(a.formattedLabels&&a.formattedLabels.length>0?a.formattedLabels[d]:a.state.labels[d])+": ",l=b.sliceTotals[d]/b.grandTotal;a.tip.setValues(i,j,{name:k,value:(100*l).toFixed(1)+"%"}),a.tip.showTip()}})}},]),a}(d),g=function(b){function a(c,d){ak(this,a);var b=ao(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c,d));return b.type="pie",b.initTimeout=0,b.init=1,b.setup(),b}return an(a,b),al(a,[{key:"configure",value:function(b){am(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"configure",this).call(this,b),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=b.hoverRadio||.1,this.config.startAngle=b.startAngle||0,this.clockWise=b.clockWise||!1}},{key:"calc",value:function(){var c=this;am(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"calc",this).call(this);var b=this.state;this.radius=this.height>this.width?this.center.x:this.center.y;var d=this.radius,e=this.clockWise,f=b.slicesProperties||[];b.sliceStrings=[],b.slicesProperties=[];var g=180-this.config.startAngle;b.sliceTotals.map(function(l,r){var m=g,a=l/b.grandTotal*360,n=a>180?1:0,o=e?-a:a,p=g+=o,h=u(m,d),q=u(p,d),i=c.init&&f[r],j=void 0,k=void 0;c.init?(j=i?i.startPosition:h,k=i?i.endPosition:h):(j=h,k=q);var s=360===a?function(c,d,a,b){var e=arguments.length>4&& void 0!==arguments[4]?arguments[4]:1,f=arguments.length>5&& void 0!==arguments[5]?arguments[5]:0,g=a.x+c.x,j=a.y+c.y,h=a.x+d.x,i=2*a.y,k=a.y+d.y;return"M"+a.x+" "+a.y+"\n		L"+g+" "+j+"\n		A "+b+" "+b+" 0 "+f+" "+(e?1:0)+"\n		"+h+" "+i+" z\n		L"+g+" "+i+"\n		A "+b+" "+b+" 0 "+f+" "+(e?1:0)+"\n		"+h+" "+k+" z"}(j,k,c.center,c.radius,e,n):function(b,c,a,d){var e=arguments.length>4&& void 0!==arguments[4]?arguments[4]:1,f=arguments.length>5&& void 0!==arguments[5]?arguments[5]:0,g=a.x+b.x,h=a.y+b.y,i=a.x+c.x,j=a.y+c.y;return"M"+a.x+" "+a.y+"\n		L"+g+" "+h+"\n		A "+d+" "+d+" 0 "+f+" "+(e?1:0)+"\n		"+i+" "+j+" z"}(j,k,c.center,c.radius,e,n);b.sliceStrings.push(s),b.slicesProperties.push({startPosition:h,endPosition:q,value:l,total:b.grandTotal,startAngle:m,endAngle:p,angle:o})}),this.init=0}},{key:"setupComponents",value:function(){var b=this.state,a=[["pieSlices",{},(function(){return{sliceStrings:b.sliceStrings,colors:this.colors}}).bind(this),],];this.components=new Map(a.map(function(a){var b=ab.apply(void 0,aq(a));return[a[0],b]}))}},{key:"calTranslateByAngle",value:function(a){var d=this.radius,b=this.hoverRadio,c=u(a.startAngle+a.angle/2,d);return"translate3d("+c.x*b+"px,"+c.y*b+"px,0)"}},{key:"hoverSlice",value:function(a,b,f,c){if(a){var d=this.colors[b];if(f){S(a,this.calTranslateByAngle(this.state.slicesProperties[b])),a.style.fill=C(d,50);var e=m(this.svg),g=c.pageX-e.left+10,h=c.pageY-e.top-10,i=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[b]:this.state.labels[b])+": ",j=(100*this.state.sliceTotals[b]/this.state.grandTotal).toFixed(1);this.tip.setValues(g,h,{name:i,value:j+"%"}),this.tip.showTip()}else S(a,"translate3d(0,0,0)"),this.tip.hideTip(),a.style.fill=d}}},{key:"bindTooltip",value:function(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}},{key:"mouseMove",value:function(b){var a=b.target,c=this.components.get("pieSlices").store,e=this.curActiveSliceIndex,f=this.curActiveSlice;if(c.includes(a)){var d=c.indexOf(a);this.hoverSlice(f,e,!1),this.curActiveSlice=a,this.curActiveSliceIndex=d,this.hoverSlice(a,d,!0,b)}else this.mouseLeave()}},{key:"mouseLeave",value:function(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}},]),a}(d),h=function(b){function a(e,c){ak(this,a);var b=ao(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,c));b.type="heatmap",b.countLabel=c.countLabel||"";var d=["Sunday","Monday"],f=d.includes(c.startSubDomain)?c.startSubDomain:"Sunday";return b.startSubDomainIndex=d.indexOf(f),b.setup(),b}return an(a,b),al(a,[{key:"setMeasures",value:function(c){var a=this.measures;this.discreteDomains=0===c.discreteDomains?0:1,a.paddings.top=36,a.paddings.bottom=0,a.legendHeight=24,a.baseHeight=12*aM+p(a);var b=this.data,d=this.discreteDomains?12:0;this.independentWidth=12*(W(b.start,b.end)+d)+q(a)}},{key:"updateWidth",value:function(){var a=this.discreteDomains?12:0,b=this.state.noOfWeeks?this.state.noOfWeeks:52;this.baseWidth=12*(b+a)+q(this.measures)}},{key:"prepareData",value:function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:this.data;if(a.start&&a.end&&a.start>a.end)throw new Error("Start date cannot be greater than end date.");if(a.start||(a.start=new Date,a.start.setFullYear(a.start.getFullYear()-1)),a.end||(a.end=new Date),a.dataPoints=a.dataPoints||{},parseInt(Object.keys(a.dataPoints)[0])>1e5){var b={};Object.keys(a.dataPoints).forEach(function(c){var d=new Date(c*aN);b[U(d)]=a.dataPoints[c]}),a.dataPoints=b}return a}},{key:"calc",value:function(){var a=this.state;a.start=V(this.data.start),a.end=V(this.data.end),a.firstWeekStart=V(a.start),a.noOfWeeks=W(a.start,a.end),a.distribution=function(d,b){for(var e=Math.max.apply(Math,aq(d)),f=1/(b-1),c=[],a=0;a<b;a++){var g=e*(f*a);c.push(g)}return c}(Object.values(this.data.dataPoints),5),a.domainConfigs=this.getDomains()}},{key:"setupComponents",value:function(){var c=this,a=this.state,d=this.discreteDomains?0:1,b=a.domainConfigs.map(function(b,e){return["heatDomain",{index:b.index,colWidth:12,rowHeight:12,squareSize:10,radius:c.rawChartArgs.radius||0,xTranslate:12*a.domainConfigs.filter(function(b,a){return a<e}).map(function(a){return a.cols.length-d}).reduce(function(a,b){return a+b},0)},(function(){return a.domainConfigs[e]}).bind(c),]});this.components=new Map(b.map(function(a,b){var c=ab.apply(void 0,aq(a));return[a[0]+"-"+b,c]}));var e=0;aQ.forEach(function(a,b){if([1,3,5].includes(b)){var d=K("subdomain-name",-6,e,a,{fontSize:10,dy:8,textAnchor:"end"});c.drawArea.appendChild(d)}e+=12})}},{key:"update",value:function(a){a||console.error("No data to update."),this.data=this.prepareData(a),this.draw(),this.bindTooltip()}},{key:"bindTooltip",value:function(){var a=this;this.container.addEventListener("mousemove",function(b){a.components.forEach(function(g){var h=g.store,c=b.target;if(h.includes(c)){var i=c.getAttribute("data-value"),d=c.getAttribute("data-date").split("-"),j=Z(parseInt(d[1])-1,!0),e=a.container.getBoundingClientRect(),f=c.getBoundingClientRect(),k=parseInt(b.target.getAttribute("width")),l=f.left-e.left+k/2,m=f.top-e.top,n=i+" "+a.countLabel,o=" on "+j+" "+d[0]+", "+d[2];a.tip.setValues(l,m,{name:o,value:n,valueFirst:1},[]),a.tip.showTip()}})})}},{key:"renderLegend",value:function(){var d=this;this.legendArea.textContent="";var a=0,e=this.rawChartArgs.radius||0,b=K("subdomain-name",a,12,"Less",{fontSize:11,dy:9});a=30,this.legendArea.appendChild(b),this.colors.slice(0,5).map(function(b,c){var f=J("heatmap-legend-unit",a+15*c,12,10,e,b);d.legendArea.appendChild(f)});var c=K("subdomain-name",a+75+3,12,"More",{fontSize:11,dy:9});this.legendArea.appendChild(c)}},{key:"getDomains",value:function(){for(var a=this.state,d=[a.start.getMonth(),a.start.getFullYear()],i=d[0],j=d[1],e=[a.end.getMonth(),a.end.getFullYear()],k=e[0]-i+1+12*(e[1]-j),f=[],b=V(a.start),g=0;g<k;g++){var c=a.end;if(!Y(b,a.end)){var h=[b.getMonth(),b.getFullYear()];c=$(h[0],h[1])}f.push(this.getDomainConfig(b,c)),aa(c,1),b=c}return f}},{key:"getDomainConfig",value:function(d){var e=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"",g=[d.getMonth(),d.getFullYear()],b=g[0],j=g[1],a=_(d),h={index:b,cols:[]};aa(e=V(e)||$(b,j),1);for(var k=W(a,e),f=[],c=void 0,i=0;i<k;i++)c=this.getCol(a,b),f.push(c),aa(a=new Date(c[aM-1].yyyyMmDd),1);return void 0!==c[aM-1].dataValue&&(aa(a,1),f.push(this.getCol(a,b,!0))),h.cols=f,h}},{key:"getCol",value:function(f,g){for(var h=arguments.length>2&& void 0!==arguments[2]&&arguments[2],c=this.state,a=V(f),d=[],e=0;e<aM;e++,aa(a,1)){var b={},i=a>=c.start&&a<=c.end;h||a.getMonth()!==g||!i?b.yyyyMmDd=U(a):b=this.getSubDomainConfig(a),d.push(b)}return d}},{key:"getSubDomainConfig",value:function(c){var d,e,a=U(c),b=this.data.dataPoints[a];return{yyyyMmDd:a,dataValue:b||0,fill:this.colors[d=b,(0,this.state.distribution).filter(function(a){return a<d}).length]}}},]),a}(c),e=function(b){function a(d,c){ak(this,a);var b=ao(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d,c));return b.barOptions=c.barOptions||{},b.lineOptions=c.lineOptions||{},b.type=c.type||"line",b.init=1,b.setup(),b}return an(a,b),al(a,[{key:"setMeasures",value:function(){this.data.datasets.length<=1&&(this.config.showLegend=0,this.measures.paddings.bottom=30)}},{key:"configure",value:function(c){am(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"configure",this).call(this,c);var e=c.axisOptions,d=void 0===e?{}:e,f=d||{},g=f.xAxis,b=f.yAxis;c.tooltipOptions=c.tooltipOptions||{},this.config.xAxisMode=g?g.xAxisMode:d.xAxisMode||"span",b&&b.length?this.config.yAxisConfig=b.map(function(a){return{yAxisMode:a.yAxisMode,id:a.id,position:a.position,title:a.title}}):(this.config.yAxisMode=b?b.yAxisMode:d.yAxisMode||"span",b&&b.id&&b.position&&(this.config.yAxisConfig=[b])),this.config.xIsSeries=d.xIsSeries||0,this.config.shortenYAxisNumbers=d.shortenYAxisNumbers||0,this.config.formatTooltipX=c.tooltipOptions.formatTooltipX,this.config.formatTooltipY=c.tooltipOptions.formatTooltipY,this.config.valuesOverPoints=c.valuesOverPoints}},{key:"prepareData",value:function(){var a,e,c,b,d;return a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:this.data,e=this.type,a.labels=a.labels||[],c=a.labels.length,b=a.datasets,d=new Array(c).fill(0),b||(b=[{values:d}]),b.map(function(b){if(b.values){var a=b.values;a=(a=a.map(function(a){return isNaN(a)?0:a})).length>c?a.slice(0,c):s(a,c-a.length,0),b.values=a}else b.values=d;b.chartType||(as.includes(e),b.chartType=e)}),a.yRegions&&a.yRegions.map(function(a){if(a.end<a.start){var b=[a.end,a.start];a.start=b[0],a.end=b[1]}}),a}},{key:"prepareFirstData",value:function(){var a,c,d,b;return a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:this.data,c=a.labels.length,d=new Array(c).fill(0),b={labels:a.labels.slice(0,-1),datasets:a.datasets.map(function(a){return{axisID:a.axisID,name:"",values:d.slice(0,-1),chartType:a.chartType}})},a.yMarkers&&(b.yMarkers=[{value:0,label:""}]),a.yRegions&&(b.yRegions=[{start:0,end:0,label:""}]),b}},{key:"calc",value:function(){var a=arguments.length>0&& void 0!==arguments[0]&&arguments[0];this.calcXPositions(),a||this.calcYAxisParameters(this.getAllYValues(),"line"===this.type),this.makeDataByIndex()}},{key:"calcXPositions",value:function(){var a=this.state,b=this.data.labels;a.datasetLength=b.length,a.unitWidth=this.width/a.datasetLength,a.xOffset=a.unitWidth/2,a.xAxis={labels:b,positions:b.map(function(c,b){return r(a.xOffset+b*a.unitWidth)})}}},{key:"calcYAxisParameters",value:function(b){var n=this,j=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"false",a=void 0,c=void 0,e=void 0,f=void 0,o=void 0,d=void 0,g=void 0,k=void 0;if(k=[],g=(d=this.config.yAxisMode||{}).position?d.position:"left",b instanceof Array)a=ae(b,j),c=this.height/ah(a),e=ag(a)*c,f=this.height-af(a)*e,this.state.yAxis={labels:a,positions:a.map(function(a){return f-a*c}),title:d.title||null,pos:g,scaleMultiplier:c,zeroLine:f};else{for(var l in this.state.yAxis=[],b)!function(h){var l=b[h];if(g=(d=n.config.yAxisConfig.find(function(a){return h===a.id})||[]).position?d.position:"left",a=ae(l,j),c=n.height/ah(a),e=ag(a)*c,f=n.height-af(a)*e,o=a.map(function(a){return f-a*c}),k.push(h),n.state.yAxis.length>1){var m=[],i=n.state.yAxis[0];c=n.height/ah(a),i.positions.forEach(function(a){m.push(Math.ceil(a/c))}),a=m.reverse(),f=n.height-af(a)*e,o=i.positions}n.state.yAxis.push({axisID:h||"left-axis",labels:a,title:d.title,pos:g,scaleMultiplier:c,zeroLine:f,positions:o})}(l);if(this.state.yAxis[1]&&this.state.yAxis[0].labels.length!==this.state.yAxis[1].labels.length){var m=[],h=this.state.yAxis.reduce(function(a,b){return a.length>b.labels.length?b:a},{length:1/0}),i=this.state.yAxis.reduce(function(a,b){return a.length<b.labels.length?a:b},{length:1/0});i.positions.forEach(function(a){m.push(Math.ceil(a/h.scaleMultiplier))}),h.labels=m.reverse(),h.positions=i.positions}}this.calcDatasetPoints(),this.calcYExtremes(),this.calcYRegions()}},{key:"calcDatasetPoints",value:function(){var a=this.state,b=function(b,c){return b.map(function(d){var b=a.yAxis;return b instanceof Array&&(b=b.length>1?b.find(function(a){return c===a.axisID}):a.yAxis[0]),ai(d,b)})};a.barChartIndex=1,a.datasets=this.data.datasets.map(function(c,f){var d=c.values,e=c.cumulativeYs||[];return{name:c.name&&c.name.replace(/<|>|&/g,function(a){return"&"==a?"&amp;":"<"==a?"&lt;":"&gt;"}),index:f,barIndex:"bar"===c.chartType?a.barChartIndex++:a.barChartIndex,chartType:c.chartType,values:d,yPositions:b(d,c.axisID),id:c.axisID,cumulativeYs:e,cumulativeYPos:b(e,c.axisID)}})}},{key:"calcYExtremes",value:function(){var a=this.state;if(this.barOptions.stacked)return void(a.yExtremes=a.datasets[a.datasets.length-1].cumulativeYPos);a.yExtremes=new Array(a.datasetLength).fill(9999),a.datasets.map(function(b){b.yPositions.map(function(b,c){b<a.yExtremes[c]&&(a.yExtremes[c]=b)})})}},{key:"calcYRegions",value:function(){var a=this.state;this.data.yMarkers&&(this.state.yMarkers=this.data.yMarkers.map(function(b){return b.position=ai(b.value,a.yAxis),b.options||(b.options={}),b})),this.data.yRegions&&(this.state.yRegions=this.data.yRegions.map(function(b){return b.startPos=ai(b.start,a.yAxis),b.endPos=ai(b.end,a.yAxis),b.options||(b.options={}),b}))}},{key:"getAllYValues",value:function(){var c,j=this,g="values",a=!!this.config.yAxisConfig,b=a?{}:[],d=function(a){var b=new Array(j.state.datasetLength).fill(0);a.forEach(function(c,d){var e=a[d].values;c[g]=b=b.map(function(a,b){return a+e[b]})})};if(this.barOptions.stacked){if(g="cumulativeYs",a){var e,h,f=(e=this.data.datasets,h="axisID",e.reduce(function(a,b){return a[b[h]]=[].concat(aq(a[b[h]]||[]),[b]),a},{}));for(var i in f)d(f[i])}else d(this.data.datasets)}return a?this.data.datasets.forEach(function(a){var c;b[a.axisID||g]?(c=b[a.axisID||g]).push.apply(c,aq(a[g])):b[a.axisID||g]=[].concat(aq(a[g]))}):b=this.data.datasets.map(function(a){return a[g]}),this.data.yMarkers&&!a&&b.push(this.data.yMarkers.map(function(a){return a.value})),this.data.yRegions&&!a&&this.data.yRegions.map(function(a){b.push([a.end,a.start])}),a?b:(c=[]).concat.apply(c,aq(b))}},{key:"setupComponents",value:function(){var g=this,a=[["xAxis",{mode:this.config.xAxisMode,height:this.height},(function(){var a=this.state;return a.xAxis.calcLabels=function(c){var a=arguments.length>1&& void 0!==arguments[1]?arguments[1]:[],d=!(arguments.length>2&& void 0!==arguments[2])||arguments[2],b=c/a.length;b<=0&&(b=1);var e=b/at,f=void 0;if(d){var g=Math.max.apply(Math,aq(a.map(function(a){return a.length})));f=Math.ceil(g/e)}return a.map(function(a,b){return(a+="").length>e&&(d?b%f!=0&&(a=""):a=e-3>0?a.slice(0,e-3)+" ...":a.slice(0,e)+".."),a})}(this.width,a.xAxis.labels,this.config.xIsSeries),a.xAxis}).bind(this),],["yRegions",{width:this.width,pos:"right"},(function(){return this.state.yRegions}).bind(this),],];this.config.yAxisConfig&&this.config.yAxisConfig.length?this.config.yAxisConfig.forEach(function(b){a.push(["yAxis",{mode:b.yAxisMode||"span",width:g.width,height:g.baseHeight,shortenNumbers:g.config.shortenYAxisNumbers,pos:b.position||"left"},(function(){return this.state.yAxis}).bind(g),])}):a.push(["yAxis",{mode:this.config.yAxisMode,width:this.width,height:this.baseHeight,shortenNumbers:this.config.shortenYAxisNumbers},(function(){return this.state.yAxis}).bind(this),]);var b=this.state.datasets.filter(function(a){return"bar"===a.chartType}),c=this.state.datasets.filter(function(a){return"line"===a.chartType}),d=b.map(function(a){var c=a.index,d=a.barIndex||c;return["barGraph-"+a.index,{index:c,color:g.colors[c],stacked:g.barOptions.stacked,valuesOverPoints:g.config.valuesOverPoints,minHeight:0*g.height},(function(){var a=this.state,f=a.yAxis,e=a.datasets[c],i=e.id,o=void 0===i?"left-axis":i,g=this.barOptions.stacked,m=this.barOptions.spaceRatio||.5,j=a.unitWidth*(1-m),n=j/(g?1:b.length);f instanceof Array&&(f=f.length>1?f.find(function(a){return o===a.axisID}):a.yAxis[0]);var h=a.xAxis.positions.map(function(a){return a-j/2});g||(h=h.map(function(a){return a+n*d-n}));var k=new Array(a.datasetLength).fill("");this.config.valuesOverPoints&&(k=g&&e.index===a.datasets.length-1?e.cumulativeYs:e.values);var l=new Array(a.datasetLength).fill(0);return g&&(l=e.yPositions.map(function(a,b){return a-e.cumulativeYPos[b]})),{xPositions:h,yPositions:e.yPositions,offsets:l,labels:k,zeroLine:f.zeroLine,barsWidth:j,barWidth:n}}).bind(g),]}),e=c.map(function(a){var b=a.index;return["lineGraph-"+a.index,{index:b,color:g.colors[b],svgDefs:g.svgDefs,heatline:g.lineOptions.heatline,regionFill:g.lineOptions.regionFill,spline:g.lineOptions.spline,hideDots:g.lineOptions.hideDots,hideLine:g.lineOptions.hideLine,valuesOverPoints:g.config.valuesOverPoints},(function(){var a=this.state,d=a.datasets[b],c=a.yAxis.length?a.yAxis.find(function(a){return d.id===a.axisID})||a.yAxis[0]:a.yAxis,e=c.positions[0]<c.zeroLine?c.positions[0]:c.zeroLine;return{xPositions:a.xAxis.positions,yPositions:d.yPositions,values:d.values,zeroLine:e,radius:this.lineOptions.dotSize||4}}).bind(g),]}),f=[["yMarkers",{width:this.width,pos:"right"},(function(){return this.state.yMarkers}).bind(this),],];a=a.concat(d,e,f);var h=["yMarkers","yRegions"];this.dataUnitComponents=[],this.components=new Map(a.filter(function(a){return!h.includes(a[0])||g.state[a[0]]}).map(function(a){var b=ab.apply(void 0,aq(a));return(a[0].includes("lineGraph")||a[0].includes("barGraph"))&&g.dataUnitComponents.push(b),[a[0],b]}))}},{key:"makeDataByIndex",value:function(){var b=this;this.dataByIndex={};var a=this.state,c=this.config.formatTooltipX,d=this.config.formatTooltipY;a.xAxis.labels.map(function(e,f){var g=b.state.datasets.map(function(a,e){var c=a.values[f];return{title:a.name,value:c,yPos:a.yPositions[f],color:b.colors[e],formatted:d?d(c):c}});b.dataByIndex[f]={label:e,formattedLabel:c?c(e):e,xPos:a.xAxis.positions[f],values:g,yExtreme:a.yExtremes[f]}})}},{key:"bindTooltip",value:function(){var a=this;this.container.addEventListener("mousemove",function(c){var b=a.measures,d=m(a.container),f=c.pageX-d.left-o(b),e=c.pageY-d.top;e<a.height+n(b)&&e>n(b)?a.mapTooltipXPosition(f):a.tip.hideTip()})}},{key:"mapTooltipXPosition",value:function(d){var c=this.state;if(c.yExtremes){var b=function(d,a){var c=arguments.length>2&& void 0!==arguments[2]&&arguments[2],b=a.reduce(function(a,b){return Math.abs(b-d)<Math.abs(a-d)?b:a},[]);return c?a.indexOf(b):b}(d,c.xAxis.positions,!0);if(b>=0){var a=this.dataByIndex[b];this.tip.setValues(a.xPos+this.tip.offset.x,a.yExtreme+this.tip.offset.y,{name:a.formattedLabel,value:""},a.values,b),this.tip.showTip()}}}},{key:"renderLegend",value:function(){var b=this,a=this.data;a.datasets.length>1&&(this.legendArea.textContent="",a.datasets.map(function(c,a){var d=function(c,f,g){var d=arguments.length>3&& void 0!==arguments[3]?arguments[3]:"none",a=arguments[4];a=arguments.length>5&& void 0!==arguments[5]&&arguments[5]?z(a,aC):a;var e=E("text",{className:"legend-dataset-text",x:0,y:0,dy:2*aE+"px","font-size":1.2*aE+"px","text-anchor":"start",fill:aG,innerHTML:a}),b=E("g",{transform:"translate("+c+", 0)"});return b.appendChild(E("rect",{className:"legend-bar",x:0,y:0,width:100,height:"2px",fill:d})),b.appendChild(e),b}(100*a,"0",100,b.colors[a],c.name,b.config.truncateLegends);b.legendArea.appendChild(d)}))}},{key:"makeOverlay",value:function(){var a=this;if(this.init)return void(this.init=0);this.overlayGuides&&this.overlayGuides.forEach(function(b){var a=b.overlay;a.parentNode.removeChild(a)}),this.overlayGuides=this.dataUnitComponents.map(function(a){return{type:a.unitType,overlay:void 0,units:a.units}}),void 0===this.state.currentIndex&&(this.state.currentIndex=this.state.datasetLength-1),this.overlayGuides.map(function(b){var c=b.units[a.state.currentIndex];b.overlay=aH[b.type](c),a.drawArea.appendChild(b.overlay)})}},{key:"updateOverlayGuides",value:function(){this.overlayGuides&&this.overlayGuides.forEach(function(b){var a=b.overlay;a.parentNode.removeChild(a)})}},{key:"bindOverlay",value:function(){var a=this;this.parent.addEventListener("data-select",function(){a.updateOverlay()})}},{key:"bindUnits",value:function(){var a=this;this.dataUnitComponents.map(function(b){b.units.map(function(b){b.addEventListener("click",function(){var c=b.getAttribute("data-point-index");a.setCurrentDataPoint(c)})})}),this.tip.container.addEventListener("click",function(){var b=a.tip.container.getAttribute("data-point-index");a.setCurrentDataPoint(b)})}},{key:"updateOverlay",value:function(){var a=this;this.overlayGuides.map(function(b){var c=b.units[a.state.currentIndex];aI[b.type](c,b.overlay)})}},{key:"onLeftArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex-1)}},{key:"onRightArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex+1)}},{key:"getDataPoint",value:function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:this.state.currentIndex,b=this.state;return{index:a,label:b.xAxis.labels[a],values:b.datasets.map(function(b){return b.values[a]})}}},{key:"setCurrentDataPoint",value:function(a){var b=this.state;(a=parseInt(a))<0&&(a=0),a>=b.xAxis.labels.length&&(a=b.xAxis.labels.length-1),a!==b.currentIndex&&(b.currentIndex=a,function(d,e,b){var a=document.createEvent("HTMLEvents");for(var c in a.initEvent(e,!0,!0),b)a[c]=b[c];d.dispatchEvent(a)}(this.parent,"data-select",this.getDataPoint()))}},{key:"addDataPoint",value:function(b,d){var c=arguments.length>2&& void 0!==arguments[2]?arguments[2]:this.state.datasetLength;am(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"addDataPoint",this).call(this,b,d,c),this.data.labels.splice(c,0,b),this.data.datasets.map(function(a,b){a.values.splice(c,0,d[b])}),this.update(this.data)}},{key:"removeDataPoint",value:function(){var b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:this.state.datasetLength-1;this.data.labels.length<=1||(am(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"removeDataPoint",this).call(this,b),this.data.labels.splice(b,1),this.data.datasets.map(function(a){a.values.splice(b,1)}),this.update(this.data))}},{key:"updateDataset",value:function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:0;this.data.datasets[b].values=a,this.update(this.data)}},{key:"updateDatasets",value:function(a){this.data.datasets.map(function(c,b){a[b]&&(c.values=a[b])}),this.update(this.data)}},]),a}(c),k=function(b){function a(c,d){ak(this,a);var b=ao(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c,d));return b.type="donut",b.initTimeout=0,b.init=1,b.setup(),b}return an(a,b),al(a,[{key:"configure",value:function(b){am(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"configure",this).call(this,b),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=b.hoverRadio||.1,this.config.startAngle=b.startAngle||0,this.clockWise=b.clockWise||!1,this.strokeWidth=b.strokeWidth||30}},{key:"calc",value:function(){var c=this;am(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"calc",this).call(this);var b=this.state;this.radius=this.height>this.width?this.center.x-this.strokeWidth/2:this.center.y-this.strokeWidth/2;var d=this.radius,e=this.clockWise,f=b.slicesProperties||[];b.sliceStrings=[],b.slicesProperties=[];var g=180-this.config.startAngle;b.sliceTotals.map(function(l,r){var m=g,a=l/b.grandTotal*360,n=a>180?1:0,o=e?-a:a,p=g+=o,h=u(m,d),q=u(p,d),i=c.init&&f[r],j=void 0,k=void 0;c.init?(j=i?i.startPosition:h,k=i?i.endPosition:h):(j=h,k=q);var s=360===a?function(c,j,b,a){var d=arguments.length>4&& void 0!==arguments[4]?arguments[4]:1,e=arguments.length>5&& void 0!==arguments[5]?arguments[5]:0,f=b.x+c.x,g=b.y+c.y,h=b.x+j.x,i=2*a+g;return"M"+f+" "+g+"\n		A "+a+" "+a+" 0 "+e+" "+(d?1:0)+"\n		"+h+" "+i+"\n		M"+f+" "+i+"\n		A "+a+" "+a+" 0 "+e+" "+(d?1:0)+"\n		"+h+" "+(b.y+c.y)}(j,k,c.center,c.radius,c.clockWise,n):function(b,c,a,d){var e=arguments.length>4&& void 0!==arguments[4]?arguments[4]:1,f=arguments.length>5&& void 0!==arguments[5]?arguments[5]:0,g=a.x+b.x,h=a.y+b.y,i=a.x+c.x,j=a.y+c.y;return"M"+g+" "+h+"\n		A "+d+" "+d+" 0 "+f+" "+(e?1:0)+"\n		"+i+" "+j}(j,k,c.center,c.radius,c.clockWise,n);b.sliceStrings.push(s),b.slicesProperties.push({startPosition:h,endPosition:q,value:l,total:b.grandTotal,startAngle:m,endAngle:p,angle:o})}),this.init=0}},{key:"setupComponents",value:function(){var b=this.state,a=[["donutSlices",{},(function(){return{sliceStrings:b.sliceStrings,colors:this.colors,strokeWidth:this.strokeWidth}}).bind(this),],];this.components=new Map(a.map(function(a){var b=ab.apply(void 0,aq(a));return[a[0],b]}))}},{key:"calTranslateByAngle",value:function(a){var d=this.radius,b=this.hoverRadio,c=u(a.startAngle+a.angle/2,d);return"translate3d("+c.x*b+"px,"+c.y*b+"px,0)"}},{key:"hoverSlice",value:function(a,b,f,c){if(a){var d=this.colors[b];if(f){S(a,this.calTranslateByAngle(this.state.slicesProperties[b])),a.style.stroke=C(d,50);var e=m(this.svg),g=c.pageX-e.left+10,h=c.pageY-e.top-10,i=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[b]:this.state.labels[b])+": ",j=(100*this.state.sliceTotals[b]/this.state.grandTotal).toFixed(1);this.tip.setValues(g,h,{name:i,value:j+"%"}),this.tip.showTip()}else S(a,"translate3d(0,0,0)"),this.tip.hideTip(),a.style.stroke=d}}},{key:"bindTooltip",value:function(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}},{key:"mouseMove",value:function(b){var a=b.target,c=this.components.get("donutSlices").store,e=this.curActiveSliceIndex,f=this.curActiveSlice;if(c.includes(a)){var d=c.indexOf(a);this.hoverSlice(f,e,!1),this.curActiveSlice=a,this.curActiveSliceIndex=d,this.hoverSlice(a,d,!0,b)}else this.mouseLeave()}},{key:"mouseLeave",value:function(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}},]),a}(d),aT={bar:e,line:e,percentage:f,heatmap:h,pie:g,donut:k},l=Object.freeze({Chart:function b(c,a){return ak(this,b),function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:"line",c=arguments[1],b=arguments[2];return"axis-mixed"===a?(b.type="line",new e(c,b)):aT[a]?new aT[a](c,b):void console.error("Undefined chart type: "+a)}(a.type,c,a)},PercentageChart:f,PieChart:g,Heatmap:h,AxisChart:e}),b={};return b.NAME="Frappe Charts",b.VERSION="1.6.2",b=Object.assign({},b,l)})()
